# ===========================================================
# üöÄ Nifty 50 Trading System - Environment Variables
# ===========================================================
#
# SETUP:
#   1. Copy this file: cp .env.example .env
#   2. Fill in your API credentials
#   3. Run: make up
#
# ‚ö†Ô∏è  NEVER commit your .env file to git!
#
# ===========================================================

# ===========================================================
# üìä BROKER CREDENTIALS (Required for L1: Ingestion)
# ===========================================================

# Which provider to use: kite | mstock | flattrade
# this is the condionla check to pull or not
SKIP_HISTORICAL_SYNC= false
MARKET_DATA_PROVIDER=mstock

# --- Zerodha Kite Connect ---
ZERODHA_API_KEY=
ZERODHA_API_SECRET=
ZERODHA_ACCESS_TOKEN=

# --- MStock API (Recommended) ---
MSTOCK_API_KEY=your_mstock_api_key
MSTOCK_ACCESS_TOKEN=          # Leave empty to use auto-login
MSTOCK_CLIENT_CODE=your_client_code
MSTOCK_PASSWORD=your_password
MSTOCK_TOTP_SECRET=your_totp_secret

# --- FlatTrade API ---
FLATTRADE_USER_ID=
FLATTRADE_API_KEY=
FLATTRADE_API_SECRET=
FLATTRADE_ACTID=
FLATTRADE_PASSWORD=

# ===========================================================
# üóÑÔ∏è INFRASTRUCTURE (Defaults work for local Docker)
# ===========================================================
# ‚ö†Ô∏è  SECURITY WARNING: Change ALL passwords before production!
# These are EXAMPLE values - NEVER use in production
# ===========================================================

# --- Database ---
POSTGRES_USER=trading
POSTGRES_PASSWORD=CHANGE_THIS_IN_PRODUCTION_trading123
POSTGRES_DB=nifty50
# Note: TIMESCALE_URL is auto-constructed from POSTGRES_* vars in docker-compose
# TIMESCALE_URL=postgresql://trading:CHANGE_THIS@timescaledb:5432/nifty50

# --- Redis ---
REDIS_URL=redis://redis:6379

# --- Kafka ---
KAFKA_BROKERS=kafka:29092

# ===========================================================
# üìä MONITORING (Optional overrides)
# ===========================================================
# ‚ö†Ô∏è  SECURITY WARNING: Change monitoring passwords in production!
# ===========================================================

GRAFANA_USER=admin
GRAFANA_PASSWORD=CHANGE_THIS_IN_PRODUCTION_admin123
PGADMIN_EMAIL=admin@admin.com
PGADMIN_PASSWORD=CHANGE_THIS_IN_PRODUCTION_admin123

# ===========================================================
# üß† AI SERVICE CONFIGURATION (Layer 9)
# ===========================================================

# Choose AI provider: heuristic | pytorch | openai | claude | ollama
# - heuristic: Rule-based, free, 70% accuracy, <10ms latency
# - pytorch: LSTM neural network, free, 85% accuracy, 30-50ms latency
# - openai: GPT-4, paid, 90% accuracy, 100-200ms latency
# - claude: Anthropic Claude, paid, 92% accuracy, 100-200ms latency
# - ollama: Local Llama 3, free, 75% accuracy, 50-100ms latency
AI_PROVIDER=heuristic

# --- OpenAI Configuration (if AI_PROVIDER=openai) ---
OPENAI_API_KEY=sk-proj-your_key_here
OPENAI_MODEL=gpt-4

# --- Anthropic Claude Configuration (if AI_PROVIDER=claude) ---
ANTHROPIC_API_KEY=sk-ant-your_key_here
CLAUDE_MODEL=claude-3-opus-20240229

# --- Ollama Configuration (if AI_PROVIDER=ollama) ---
OLLAMA_URL=http://ollama:11434
OLLAMA_MODEL=llama3

# ===========================================================
# üì± NOTIFICATION & ALERTS (Layer 8)
# ===========================================================

# --- Telegram Bot ---
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=123456789

# --- Email Service ---
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password_no_spaces
ADMIN_EMAIL=admin@example.com
SYSTEM_EMAIL=system@stocks-guru.com

# ===========================================================
# üéõÔ∏è FEATURE FLAGS
# ===========================================================

LOG_LEVEL=info
NODE_ENV=development

# Trading Modes
ENABLE_PAPER_TRADING=true
ENABLE_LIVE_TRADING=false

# Notifications
ENABLE_TELEGRAM_ALERTS=true
ENABLE_EMAIL_ALERTS=false

# Data Ingestion
ENABLE_BACKFILL=true
ENABLE_LIVE_STREAMING=true

# ===========================================================
# üîê SECURITY (Production Only)
# ===========================================================

# Generate with: openssl rand -base64 32
API_KEY_SALT=your_random_32_char_string_here

# Generate with: openssl rand -base64 64
JWT_SECRET=your_random_64_char_jwt_secret_here
SESSION_SECRET=your_random_64_char_session_secret_here

# ===========================================================
# üöÄ PERFORMANCE TUNING (Optional)
# ===========================================================

# Redis
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# PostgreSQL
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=512MB

# Kafka
KAFKA_REPLICATION_FACTOR=1
KAFKA_MIN_INSYNC_REPLICAS=1

# API Rate Limiting
RATE_LIMIT_STANDARD=10  # requests per second
RATE_LIMIT_PREMIUM=50

# ===========================================================
# üìä MONITORING (Optional)
# ===========================================================

PROMETHEUS_RETENTION=15d
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin123
PGADMIN_EMAIL=admin@admin.com
PGADMIN_PASSWORD=admin123

# ===========================================================
# üåê EXTERNAL APIS (Optional)
# ===========================================================

# News APIs (for /news command)
NEWS_API_KEY=your_news_api_key_here

# ===========================================================
# üîÑ AWS DEPLOYMENT (Optional - for AWS managed services)
# ===========================================================

# AWS RDS (TimescaleDB)
AWS_RDS_ENDPOINT=your-db.xxxx.us-east-1.rds.amazonaws.com
AWS_RDS_PORT=5432

# AWS ElastiCache (Redis)
AWS_ELASTICACHE_ENDPOINT=your-redis.xxxx.cache.amazonaws.com
AWS_ELASTICACHE_PORT=6379

# AWS MSK (Kafka)
AWS_MSK_BROKERS=broker1.xxxx.kafka.us-east-1.amazonaws.com:9092,broker2.xxxx.kafka.us-east-1.amazonaws.com:9092

# AWS Secrets Manager
AWS_SECRETS_ARN=arn:aws:secretsmanager:us-east-1:123456789:secret:trading-system

# ===========================================================
# üìù NOTES
# ===========================================================
#
# QUICK START:
#   1. For local development: Only fill MSTOCK credentials and set AI_PROVIDER=heuristic
#   2. For production: Change all passwords, generate secrets, set ENABLE_LIVE_TRADING=true
#   3. For AI features: Add OpenAI or Claude API keys, or use pytorch (free)
#
# SECURITY WARNINGS:
#   - NEVER commit .env file to git
#   - Use strong passwords in production
#   - Rotate broker API keys monthly
#   - Enable SSL/TLS for production databases
#
# HELP:
#   - See README.md for detailed setup instructions
#   - See ARCHITECTURE.md for technical documentation
#   - See DEPLOYMENT.md for production deployment guide
#
# ===========================================================
